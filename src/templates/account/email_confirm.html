{% extends "base.html" %}
{% load i18n allauth account base_tags button_tags %}

{% block title %}
  {% trans "Confirm Email Address | Mahmoud Ashraf" %}
{% endblock title %}

{% block content %}
  <div class="flex-1 w-full bg-dark px-4 py-8 sm:py-12 md:py-16 zigzag">
    <div class="max-w-xl mx-auto px-6 py-8 sm:px-8 sm:py-10 space-y-6 text-primary">
      <h2 class="text-2xl font-semibold">
        {% trans "Confirm Email Address" %}
      </h2>

      {% if confirmation %}
        {% user_display confirmation.email_address.user as user_display %}

        {% if can_confirm %}
          <p class="text-primary/80">
            {% blocktrans with confirmation.email_address.email as email %}
              Please confirm that
              <a href="mailto:{{ email }}" class="text-accent underline hover:text-accent-bright">
                {{ email }}
              </a>
              is an email address for user {{ user_display }}.
            {% endblocktrans %}
          </p>

          <form method="post"
                action="{% url 'account_confirm_email' confirmation.key %}"
                class="space-y-4 pt-4">
            {% csrf_token %}
            {{ redirect_field }}

            {% button type="submit" variant="primary" %}
              {% trans "Confirm" %}
            {% endbutton %}
          </form>

        {% else %}
          <p class="text-primary/80">
            {% blocktrans with confirmation.email_address.email as email %}
              Unable to confirm {{ email }} because it is already confirmed by a different account.
            {% endblocktrans %}
          </p>
        {% endif %}

      {% else %}
        {% url 'account_email' as email_url %}
        <p class="text-primary/80">
          {% blocktrans %}
            This email confirmation link expired or is invalid.
            Please
            <a href="{{ email_url }}" class="text-accent underline hover:text-accent-bright">
              issue a new email confirmation request
            </a>.
          {% endblocktrans %}
        </p>
      {% endif %}
    </div>
  </div>
{% endblock content %}
