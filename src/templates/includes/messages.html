{% load base_tags %}

<div id="messages"
     hx-swap-oob="beforeend"
     class="fixed bottom-20 right-4 sm:right-8 z-50 w-[calc(100%-2rem)] sm:w-96 max-w-full space-y-3 pointer-events-none sm:pointer-events-auto px-2 sm:px-0">
  <div class="relative space-y-3">
    {% for message in messages %}
      <div x-data="messages"
           data-counter="{{ forloop.counter0 }}"
           @mouseenter="stop"
           @mouseleave="play"
           x-show="opened"
           x-transition:enter="transition ease-out duration-500 transform"
           x-transition:enter-start="translate-x-4 opacity-0"
           x-transition:enter-end="translate-x-0 opacity-100"
           x-transition:leave="transition ease-in duration-300 transform"
           x-transition:leave-start="translate-x-0 opacity-100"
           x-transition:leave-end="translate-x-4 opacity-0"
           class="{{ message.tags|message_color }} pointer-events-auto flex items-start justify-between gap-4 px-4 py-3 sm:px-5 sm:py-4 shadow-xl text-sm sm:text-base font-semibold border-l-4 bg-darker border border-dark">
        <div class="flex-1 break-words">
          {{ message }}
        </div>

        <button @click="close"
                class="js-only shrink-0 cursor-pointer text-xl leading-none text-secondary hover:text-primary focus:outline-none focus-visible:ring">
          {% icon "x" class="w-4 ht-4" %}
        </button>
      </div>
    {% endfor %}
  </div>
</div>
