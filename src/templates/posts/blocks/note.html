{% load wagtailimages_tags wagtailcore_tags %}

<div class="flex flex-col bg-darker">
  {% if self.content_data.truncated %}
    <div class="p-summary sr-only">
      {{ self.content_data.truncated|striptags }}
    </div>
  {% endif %}

  <div class="e-content prose prose-main prose-sm sm:prose-base lg:prose-lg max-w-none">
    {{ self.content }}
  </div>

  {% if self.media %}
    <div class="grid grid-cols-2 gap-2 md:gap-4 mt-4">
      {% for block in self.media %}
        <div class="relative aspect-square overflow-hidden border border-primary/10 shadow-md hover:shadow-lg transition-shadow duration-200">
          {% if block.block_type == 'image' %}
            {% picture block.value format-{avif,webp,jpeg} width-800 class="u-photo w-full h-full object-cover hover:scale-105 transition-transform duration-300" %}
          {% elif block.block_type == 'video' %}
            <div class="u-video w-full h-full *:w-full *:h-full *:object-cover *:hover:scale-105 *:transition-transform *:duration-300">
              {{ block }}
            </div>
          {% elif block.block_type == 'video_embed' %}
            <div class="w-full h-full **:w-full **:h-full u-video *:object-cover *:hover:scale-105 *:transition-transform *:duration-300">
              {{ block }}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>
