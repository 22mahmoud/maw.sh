{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
  <article class="grow flex relative py-9 px-4 md:px-6">
    <div class="grow flex flex-col lg:flex-row lg:items-start gap-10">
      <aside class="zigzag bg-dark p-6 lg:w-1/3">
        <div class="flex flex-col gap-6">
          <div class="flex flex-col gap-4">
            <h1 class="text-2xl sm:text-3xl font-heading font-bold leading-snug">
              {{ page.title }}
            </h1>
            <p class="text-base text-secondary sm:text-lg">
              {{ page.short_description }}
            </p>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-4">
            <div class="flex flex-col gap-2">
              <span class="text-lg font-semibold font-heading">Client</span>
              {% picture page.client.logo format-{avif,webp,jpeg} width-80 %}
            </div>

            <div class="flex flex-col gap-2">
              <span class="text-lg font-semibold font-heading">Type</span>
              <span class="text-sm">{{ page.project_type }}</span>
            </div>

            <div class="flex flex-col gap-2">
              <span class="text-lg font-semibold font-heading">Role</span>
              <span class="text-sm">{{ page.role }}</span>
            </div>

            <div class="flex flex-col gap-2">
              <span class="text-lg font-semibold font-heading">Date</span>
              <span class="text-sm">
                {{ page.start_date|date:"F Y" }} - {{ page.end_date|date:"F Y" }}
              </span>
            </div>

            <div class="flex flex-col gap-2 sm:col-span-2 lg:col-span-1">
              <span class="text-lg font-semibold font-heading">Technologies</span>
              <div class="flex flex-wrap gap-2">
                {% for tech in page.technologies %}
                  <span class="px-3 py-1 text-xs font-semibold bg-darker text-primary rounded-full">
                    {{ tech.name }}
                  </span>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </aside>

      <main class="prose prose-main max-w-none text-base flex-1">
        {% for block in page.body %}
          {% if block.block_type == 'gallery' %}
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 my-12">
              {% for image in block.value %}
                <div class="group overflow-hidden shadow-lg transform {% cycle 'rotate-2' '-rotate-2' 'rotate-1' '-rotate-1' %} transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-2xl hover:rotate-0 hover:z-10 focus-within:scale-105 focus-within:shadow-2xl focus-within:rotate-0 focus-within:z-10">
                  {% image image original as full_image %}
                  <a href="{{ full_image.full_url }}">
                    {% picture image format-{avif,webp,jpeg} width-800 class="object-cover w-full ht-full" %}
                  </a>
                </div>
              {% endfor %}
            </div>
          {% else %}
            {% include_block block %}
          {% endif %}
        {% endfor %}
      </main>
    </div>
  </article>
{% endblock content %}
